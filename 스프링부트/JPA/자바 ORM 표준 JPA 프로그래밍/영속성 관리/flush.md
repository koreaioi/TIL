# 플러쉬 flush

영속성 컨텍스트의 변경 내용을 DB에 반영한다.   
영속성 컨텍스트와 DB를 맞추는 작업이다. 

- 영속성 컨텍스트를 비우지 않는다.
- 영속성 컨텍스트의 변경 내용을 DB에 동기화한다.
- 트랜잭션이라는 작업 단위가 중요 -> 커밋 직전에만 동기화 하면 된다.

## 플러시 발생하면?

1. 변경 감지가 일어난다.
2. 수정된 엔티티에 대한 UPDATE 쿼리가 쓰기 지연 SQL 저장소에 등록된다.
3. 쓰기 지연 SQL 저장소의 쿼리를 DB에 전송한다. (등록, 수정, 삭제 쿼리 등)


## 영속성 컨텍스트를 flush 하는 방법

1. em.flush() - 직접 호출
2. 트랜잭션 커밋 - 플러시 자동 호출
3. JPQL 쿼리 실행 시 - 플러시 자동 호출

## 플러시 모드 옵션
사실상 쓰지 않는다.

em.setFlushMode(FlushModeType.CoMMIT)   
- FlushModeType.AUTO: 커밋이나 쿼리를 실행할 때 플러시 (기본 값)
- FlushModeType.COMMIT: 커밋할 때만 플러시